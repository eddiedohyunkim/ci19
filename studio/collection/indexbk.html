<title>lottery</title>

<style>
	html, body {
		height: 100%;
	}
	body {
		background-color: #000000;
		margin: 0;
		font-family: Helvetica, sans-serif;;
		overflow: hidden;
		color: white;
	}
	
	#menu {
		position: absolute;
		bottom: 20px;
		width: 100%;
		text-align: center;
	}
	.ball {
		width: 120px;
		height: 120px;
		box-shadow: 0px 0px 12px rgba(0,255,255,0.5);
		border-radius: 50%;
		border: 1px solid rgba(127,255,255,0.25);
		text-align: center;
		cursor: default;
	}
	.ball:hover {
		box-shadow: 0px 0px 12px rgba(0,255,255,0.75);
		border: 1px solid rgba(127,255,255,0.75);
	}
	.number {
		position: absolute;
		top: 20px;
		left: 0px;
		right: 0px;
		font-size: 70px;
		font-weight: bold;
		color: rgba(255,255,255,0.75);
			
	}
	
	button {
		color: rgba(127,255,255,0.75);
		background: transparent;
		outline: 1px solid rgba(127,255,255,0.75);
		border: 0px;
		padding: 5px 10px;
		cursor: pointer;
	}
	button:hover {
		background-color: rgba(0,255,255,0.5);
	}
	button:active {
		color: #000000;
		background-color: rgba(0,255,255,0.75);
	}
</style>
<body>
	When onmouseover or onclick a ball, <br>show how many times the number has been repeated. <br>In which event the number has been selected. <br> What ball is this; either from ball 1 to ball 6. And in which event this ball belongs! <br>When mouseout or onclick again, all the infos are gone.
		<script src="js/three.js"></script>
		<script src="js/tween.min.js"></script>
		<script src="js/TrackballControls.js"></script>
		<script src="js/CSS3DRenderer.js"></script>

		<div id="container"></div>
		<div id="menu">
			<button id="table">10 x 5</button>
			<button id="grid">6 x 1</button>
		</div>

<script>
		var position = [
			{y:1, x:1},
			{y:1, x:2},
			{y:1, x:3},
			{y:1, x:4},
			{y:1, x:5},
			{y:1, x:6},
			{y:1, x:7},
			{y:1, x:8},
			{y:1, x:9},
			{y:1, x:10},
			{y:2, x:1},
			{y:2, x:2},
			{y:2, x:3},
			{y:2, x:4},
			{y:2, x:5},
			{y:2, x:6},
			{y:2, x:7},
			{y:2, x:8},
			{y:2, x:9},
			{y:2, x:10},
			{y:3, x:1},
			{y:3, x:2},
			{y:3, x:3},
			{y:3, x:4},
			{y:3, x:5},
			{y:3, x:6},
			{y:3, x:7},
			{y:3, x:8},
			{y:3, x:9},
			{y:3, x:10},
			{y:4, x:1},
			{y:4, x:2},
			{y:4, x:3},
			{y:4, x:4},
			{y:4, x:5},
			{y:4, x:6},
			{y:4, x:7},
			{y:4, x:8},
			{y:4, x:9},
			{y:4, x:10},
			{y:5, x:1},
			{y:5, x:2},
			{y:5, x:3},
			{y:5, x:4},
			{y:5, x:5},
		];

	var camera, scene, renderer;
	var controls;
	var objects = [];
	var targets = { table: [], grid: [] };

	init();
	animate();

function init() {
		camera = new THREE.PerspectiveCamera( 50, window.innerWidth / window.innerHeight, 1, 10000 );
		camera.position.z = 2000;
		scene = new THREE.Scene();

		var url = "https://raw.githubusercontent.com/eddiedohyunkim/ci19/master/studio/collection/lottery.json"
		fetch(url)
		.then(function(response){return response.json();})
		.then(function(json){buildPage(json);})

		function buildPage(data) {

			console.log(data);
			console.log(targets);
			// 10 x 5
			for ( var i = 0; i < data.length; i += 1) {
				for (var j = 0; j < 6; j += 1){

					var ballkey = "ball" + (j + 1);
					var ball = document.createElement( 'div' );
					
					ball.className =  "ball row" + (i+1);
					ball.setAttribute("id", data[i][ballkey]);
					ball.style.backgroundColor = 'rgba(0,127,127,0.2)';	
					
					// var row1 = document.getElementsByClassName("row1");
					// for (var i = 0; i < row1.length; i++){
					// 	console.log("blue");
					// }
					
					// .onmouseover = function(){console.log("good");};
					// ball.onmouseover = function() { console.log("in");};
					// ball.onmouseout = function() { console.log("out");};


					var number = document.createElement( 'div' );
					number.className = 'number' ;
					number.innerHTML = data[i][ballkey];
					ball.appendChild( number );
	
					var object = new THREE.CSS3DObject( ball );
					object.position.x = Math.random() * 1000-500;
					object.position.y = Math.random() * 1000-500;
					object.position.z = Math.random() * 1000-500;
					scene.add( object );
					objects.push( object );
	
					var object = new THREE.Object3D();
					object.position.x = ( position[ data[i][ballkey] - 1 ].x * 150 ) - 800;
					object.position.y = - ( position[ data[i][ballkey] - 1].y * 150 ) + 500;
					object.position.z = (  i * 40 ) - 300;
					targets.table.push( object );

					
				
				}
			}
			

			// 6 x 1
			for ( var i = 0; i < objects.length ; i +=1 ) {
				var object = new THREE.Object3D();
				object.position.x = ( ( i % 6 ) * 150 ) - 370;
				object.position.y = ( - ( Math.floor( i ) % 1 ) * 150 ) ;
				object.position.z = ( Math.floor( i / 6 ) * 100 ) - 300;
				targets.grid.push( object );
			}
		}
	
		

		renderer = new THREE.CSS3DRenderer();
		renderer.setSize( window.innerWidth, window.innerHeight );
		document.getElementById( 'container' ).appendChild( renderer.domElement );
		// Trackball Ctrls
		controls = new THREE.TrackballControls( camera, renderer.domElement );
		controls.rotateSpeed = 1;
		controls.minDistance = 500;
		controls.maxDistance = 6000;
		controls.addEventListener( 'change', render );

		// button 10x5
		var button = document.getElementById( 'table' );
		button.addEventListener( 'click', function () {
			transform( targets.table, 1800 );
		}, false );
		
		// button 6x1
		var button = document.getElementById( 'grid' );
		button.addEventListener( 'click', function () {
			transform( targets.grid, 1800 );
		}, false );
		transform( targets.table, 1800 );
		
		// modl re-rend acc to wdn sz 
		window.addEventListener( 'resize', onWindowResize, false );
}



	function transform( targets, duration ) {
		TWEEN.removeAll();
		for ( var i = 0; i < objects.length; i +=1 ) {
			var object = objects[ i ];
			var target = targets[ i ];
			
			new TWEEN.Tween( object.position )
				.to( { x: target.position.x, y: target.position.y, z: target.position.z }, Math.random() * duration + duration )
				.easing( TWEEN.Easing.Exponential.InOut )
				.start();
			
			new TWEEN.Tween( object.rotation )
				.to( { x: target.rotation.x, y: target.rotation.y, z: target.rotation.z }, Math.random() * duration + duration )
				.easing( TWEEN.Easing.Exponential.InOut )
				.start();
		}
		
		new TWEEN.Tween( this )
			.to( {}, duration * 2 )
			.onUpdate( render )
			.start();
	}



	function onWindowResize() {
		camera.aspect = window.innerWidth / window.innerHeight;
		camera.updateProjectionMatrix();
		renderer.setSize( window.innerWidth, window.innerHeight );
		render();
	}

	function animate() {
		requestAnimationFrame( animate );
		TWEEN.update();
		controls.update();
	}

	function render() {
		renderer.render( scene, camera );
	}

</script>
</body>